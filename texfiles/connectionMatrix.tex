%!TEX root = ../main.tex

\section{Connection Matrix Theory}\label{sec:CMT}

In this section we will review the connection matrix theory.  Unfortunately, the theory comes with a large overhead of mathematical machinery.  This section is included for completeness may be skipped upon first reading.

The connection matrix theory was first developed by R. Franzosa in a sequence of papers based on his dissertation, which was directed by C. Conley~\cite{fran2,fran,fran3}.  These ideas were reinterpreted by J. Robbin and D. Salamon in~\cite{salamon}.  We will discuss both approaches.  The connection matrix is the appropriate generalization of the Morse boundary operator for the Conley theory; it is a boundary operator defined on Conley indices.  Its basic utility is to prove the existence of connecting orbits~\cite{mpmw}.  At a higher level, it serves as an algebraic representation of global dynamics and may used to construct (semi)-conjugacies of the global attractor~\cite{dhmo,mcmodels,scalar}. Its preeminent function is to complete the Conley theory to a homological theory~\cite{mc}.  

We first review the connection matrix theory as presented by Franzosa in~\cite{fran}.

\subsection{The Category of Chain Complex Braids}
It was Conley's observation~\cite{conley} that focusing on the attractors of a dynamical system provides a generalization of the Spectral Decomposition of Smale~\cite[Theorem 6.2]{smale}.  There is a lattice structure to the attractors of a dynamical system~\cite{salamon,lsa,lsa2}.  Thus a natural object of study in Conley theory is some finite sublattice of attractors, and an associated sublattice of attracting blocks.  A sublattice of attracting blocks is what Franzosa calls an index filtration.  We call this an index lattice. The term `index' here refers to the Conley index.

In his work, Franzosa introduces the notion of a {\em chain complex braid} as a data structure to hold the chain complexes that arise out of the topological data within the index lattice.  The chain complex braid is organized by the poset of join-irreducibles of the index lattice.  Implicit in Franzosa's work is a description of a category for chain complex braids over a fixed poset $J(L)$.  We now describe this category, which we label ${\bf CCB}(J(L),\leq)$.

\begin{defn}
{\em
A sequence of chain complexes and chain maps $$C_1\xrightarrow{i} C_2 \xrightarrow{p} C_3$$
is called {\em weakly exact} if $i$ is injective, $p\circ i = 0$ and $p:C_2/im(i)\to C_3$ induces an isomorphism on homology.
}
\end{defn}
\begin{rem}
Every short exact sequence is weakly exact. The notion of weakly exact handles complications which arise when working with singular homology and a lattice of attracting blocks.
\end{rem}

\begin{defn}
{\em
A {\em chain complex braid} over $(P,\leq)$ is a collection of chain complexes and chain maps such that:
\begin{enumerate}
\item for each $I\in I(P)$ there is a chain complex $(C(I),\partial(I))$
\item for each $(I,J)\in I_2(P)$ there are chain maps $$i(I,IJ):C(I)\to C(IJ)\quad\quad p(IJ,J):C(IJ)\to C(J)$$ which satisfy:
\begin{enumerate}
\item $C(I)\xrightarrow{i(I,IJ)} C(IJ)\xrightarrow{p(IJ,J)} C(J)$ is weakly exact,
\item if $I$ and $J$ are noncomparable then $p(JI,I)i(I,IJ)=id|_{C(I)}$
\item if $(I,J,K)\in I_3(P)$ then the following braid diagram commutes:
\[
\xymatrixrowsep{0.03in}
\xymatrixcolsep{0.3in}
\xymatrix{
& & C(J) \ar[dr] & &  \\
& C(IJ) \ar[ur] \ar[dr] & & C(JK) \ar[dr] &  \\
C(I) \ar[ur] \ar[rr]& & C(IJK) \ar[rr] \ar[ur]& & C(K) 
}
\]
\end{enumerate}

\end{enumerate}
}
\end{defn}

Chain complex braids are the objects of ${\bf CCB}(P,\leq)$.  For  chain complex braids $\cC$ and $\cC'$ a morphism $\Psi:\cC\to \cC'$  is a collection of chain maps $\Psi(I):C(I)\to C'(I)$ for each $I\in I(<)$ such that for $(I,J)\in I_2(<)$ the following diagram commutes:
\[
\xymatrixcolsep{0.4in}
\xymatrixrowsep{0.4in}
\xymatrix{
C(I) \ar[r] \ar@{->}[d]_{\Psi(I)} & C(IJ) \ar@{->}[d]_{\Psi(IJ)} \ar[r] & C(J) \ar@{->}[d]^{\Psi(J)}  \\
C'(I) \ar[r] & C'(IJ) \ar[r] & C'(J)
}
\] 

Different index lattices associated with the same sublattice of attractors may yield different chain complex braids.  However the homology of these chain groups are an invariant.  This is the motivation for the idea of a graded module braid, which formalizes the notion of `homology' for a chain complex braid.


\begin{defn}
{\em
A {\em graded module braid} over $(P,\leq)$ is a collection of graded modules and maps between graded modules satisfying:
\begin{enumerate}
\item for each $I\in I(P)$ there is a graded module $G(I)$
\item for each $(I,J)\in I_2(P)$ there are maps:
\begin{align*}
i(I,IJ):G(I)\to G(IJ) \text{ of degree 0,}\\
p(IJ,J):G(IJ)\to G(J) \text{ of degree 0,}\\
\partial(J,I):G(J)\to G(I) \text{ of degree -1}
\end{align*}
which satisfy:
\begin{enumerate}
\item $\ldots \xrightarrow{i} G(I)\to G(IJ)\xrightarrow{p} G(J) \xrightarrow{\partial} \ldots$ is exact,
\item if $I$ and $J$ are noncomaprable then $p(JI,I)i(I,IJ)=id|_{G(I)}$
\item if $(I,J,K)\in I_3(P)$ then the following braid diagram commutes:
\[
\xymatrixrowsep{0.15in}
\xymatrixcolsep{0.3in}
\xymatrix{
\vdots \ar@{->}[d] && \cdots \ar@{->}[drr] \ar@{->}[dll] && \vdots \ar@{->}[d]\\
G(I)\ar@/_2pc/[dd]_{i} \ar@{->}[drr]_{i} &&  && G(K)\ar@{->}[dll]_{\partial} \ar@/^2pc/[dd]_{\partial}  \\
& &G(IJ) \ar@{->}[dll]_{i} \ar@{->}[drr]_{p} &&\\
G(IJK) \ar@/_2pc/[dd]_{p}  \ar@{->}[drr]_{p} &&  && G(J)\ar@{->}[dll]_{i}  \ar@/^2pc/[dd]_{\partial}  \\
& &G(JK) \ar@{->}[dll]_{p} \ar@{->}[drr]_{\partial} &&\\
G(K)\ar@/_2pc/[dd]_{\partial}    \ar@{->}[drr]_{\partial} &&  && G(I)\ar@{->}[dll]_{i}   \ar@/^2pc/[dd]_{i} \\
& &G(IJ) \ar@{->}[dll]_{p} \ar@{->}[drr]_{i} &&\\
G(J)\ar@{->}[d] \ar@{->}[drr] &&  && G(IJK)\ar@{->}[dll]  \ar@{->}[d] \\
\vdots && \cdots && \vdots}
\] 
%C(I) \incar[r] \ar@{->}[d]_{\Psi(I)} & C(IJ) \ar@{->}[d]_{\Psi(IJ)} \proar[r] & C(J) \ar@{->}[d]^{\Psi(J)}  \\
%C'(I) \incar[r] & C'(IJ) \proar[r] & C'(J)
\end{enumerate}

\end{enumerate}
}
\end{defn}

A morphism $\theta:\cG\to \cG'$ of graded module braids is a collection of linear maps $\theta(I):G(I)\to G'(I)$, $I\in I(P)$ such that for each $(I,J)\in I_2(P)$ the following diagram commutes:
\[
\xymatrixrowsep{0.4in}
\xymatrixcolsep{0.45in}
\xymatrix{
\ldots \ar@{->}[r] & G(I) \ar@{->}[d]^{\theta(I)} \ar@{->}[r]^{i} & G(IJ) \ar@{->}[d]_{\theta(IJ)} \ar@{->}[r]^{p} & G(J) \ar@{->}[d]_{\theta(I)} \ar@{->}[r]^{\partial} & G(I) \ar@{->}[d]_{\theta(I)} \ar@{->}[r] & \ldots\\
\ldots \ar@{->}[r] & G'(I) \ar@{->}[r]^{i} & G'(IJ) \ar@{->}[r]^{p} & G'(J) \ar@{->}[r]^{\partial} & G'(I) \ar@{->}[r] &\ldots
}
\]
%As observed by Robbin and Salamon~\cite{sal}, the correct way to think about ${\bf CCB}(P,\leq)$ is as a homotopy category.

We label the category of graded module braids over $(J(L),\leq)$ by ${\bf GB}(J(L),\leq)$.  Implicit in~\cite{fran} is the description of a functor from $\cH:{\bf CCB}(J(L),\leq)\to {\bf GB}(J(L),\leq)$ which is the analogy of the homology functor.  This is basically the content of~\cite[Proposition 2.7]{fran}.


\begin{rem}
In the classical connection matrix theory, the graded module braid is the fundamental structure of interest.  This is pointed out in Franzosa~\cite{}.  
\end{rem}


\subsection{Connection Matrices}

The connection matrix is a boundary operator on Conley indices.  In our case the Conley indices are graded vector spaces.  Before getting to the definition of connection matrix we must first introduce some terminology.  Let $(P,\leq)$ be a poset.  Let $\{V_p\}_{p\in P}$ be a collection of graded vector spaces indexed by $P$.  Define $$V^\oplus(P) := \bigoplus_{p\in P} V_p$$  For collections $\{V_p\}_{p\in P}$ and $\{W_p\}_{p\in P}$ a morphism $\phi(P):V^\oplus(P)\to W^\oplus(P)$ may be thought of as a matrix of linear maps: $$[\phi(p,q):V_p\to W_q\mid p,q\in P]$$


As $V^\oplus(P),W^\oplus(P)$ are indexed by a poset, we say that a morphism $\phi(P)$ is {\em diagonal with respect to $P$} if $\phi(p,q)=0$ for $p\neq q$.  It is {\em upper triangular with respect to $P$} if $\phi(p,q)=0$ for $p\nless q$.  We will also be concerned with endomorphisms.  An endomorphism $\Delta(P):V^\oplus(P)\to V^\oplus(P)$ is {\em a boundary map} if each $\Delta(p,q)$ is a degree -1 map and $\Delta(P)\circ \Delta(P) = 0$.  Identifying an endomorphism $\Delta(P)$ with its matrix structure is origin of the term {\em connection matrix}.  

One often examines subspaces of $V^\oplus(P)$.  For $I\subseteq P$ we define $V^\oplus(I)= \bigoplus_{p\in I} V_p$.  We let $\phi(I)$ be the restriction of $\phi(P)$ to $V^\oplus(I)\to V^\oplus(I)$.  It is easy to see that $\phi(I) = \pi_{P,I} \circ \phi(P) \circ \iota_{I,P}$ where $\iota_{I,P}:V^\oplus(I)\to V^\oplus(P)$ and $\pi_{P,I}:V^\oplus(P)\to V^\oplus(I)$ are the natural inclusion and projection.  The following sequence of propositions shows that upper triangular boundary maps can be used to build chain complex braids.




\begin{prop}[Proposition 3.2,~\cite{fran}]
If $\Delta(P):V^\oplus(P)\to V^\oplus(P)$ is an upper triangular boundary map then $\Delta(I)$ upper triangular boundary map for any convex set $I$.   
\end{prop}

\begin{prop}[Proposition 3.3,~\cite{fran}]\label{prop:fran:3.3}
If $\Delta(P):V^\oplus(P)\to V^\oplus(P)$ is an upper triangular boundary map, then for any adjacent pair $(I,J)\in I_2(P)$ the following sequence is a short exact sequence of chain complexes: $$0\to (V^\oplus(I),\Delta(I)\to (V^\oplus(IJ),\Delta(IJ))\to (V^\oplus(J),V(J))\to 0$$ where the maps are the natural inclusion and projections.
\end{prop}

\begin{prop}[\cite{fran}, Proposition 3.4]\label{prop:fran:3.4}
Given an upper triangular boundary map $\Delta(P):C^\oplus(P)\to C^\oplus(P)$ the collection, denoted $\cC_\Delta$, consisting of the chain complexes $C(I)$ with boundary map $\partial(I)$ for each $I\in I(P)$ and the obvious chain maps $i(I,IJ)$ and $p(IJ,J)$ for each $(I,J)\in I_2(P)$ is a chain complex braid over $P$.
\end{prop}






\begin{defn}
{\em
Let $\cG$ be a graded module braid.  Let $\{C(p)\}_{p\in P}$ be a collection of graded vector spaces.  Let $\Delta:C^\oplus(P)\to C^\oplus(P)$ be an upper triangular boundary map.  Let $\cC_\Delta$ be the associated chain complex braid.  If $\cH(\cC)\cong \cG$, then $\Delta$ is a {\em C-connection matrix} for $\cC$.  If in addition $\Delta(p,p)=0$ for all $p\in P$ then $\Delta$ is a {\em connection matrix} for $\cC$.
}
\end{defn}

It is clear that if $\Delta(p,p)=0$ for all $p\in P$ then for each $p$ $HC(p)\cong C(p)$ and $\Delta$ may be written as a boundary map $\Delta:\bigoplus_{p\in P} HC(p)\to \bigoplus_{p\in P} HC(p)$.

One way to motivate the connection matrix is to observe that chain complex braids generated by upper triangular boundary maps are particularly simple.  For instance given $I\in I(P)$ we have $C(I) = \bigoplus_{p\in I} C(p)$.  Below is one of Franzosa's theorems on existence of connection matrices:

\begin{thm}[\cite{fran}, Theorem 4.8]
Let $\cC$ be a chain complex braid over $(P,\leq)$.  Let $B=\{B(p)\}_{p\in P}$ be a collection of free chain complexes such that $HB(p) \cong HC(p)$, the homology of the chain complex $C(p)$ in $\cC$.  Then there exists an upper triangular boundary map, $$\Delta:\bigoplus_{p\in P} B(p)\to \bigoplus_{p\in P}B(p)$$ and a chain map $\Psi:\cB\to \cC$, from the chain complex braid induced by $\Delta$ such that $\cH\Psi:\cH\cB\to \cH\cC$ is a graded module braid isomorphism.
\end{thm}

Here's a simple application of Franzosa's theorem.  Let $\cC$ be a chain complex braid.  Choose $B = \{C(p)\}_{p\in P}$.  The theorem says that there exists an upper triangular boundary map $\Delta:C^\oplus(P)\to C^\oplus(P)$ and a chain map $\Psi:\cB\to \cC$ such that $\cH\Psi$ is an isomorphism.  Therefore for any chain complex braid there is a simple representative (one generated by an upper triangular boundary map) in its {\em derived equivalence class}.  In our case $HC(p)$ is free (it is a graded vector space), thus we may choose $B=\{HC(p)\}$ where $HC(p)$ is considered as chain complex with zero differentials.  In this case $\Delta$ is a connection matrix.


\begin{rem}
Classically the connection matrix is used as follows.  One first establishes existence so that one may assume some connection matrix exists and a priori the entries of the connection matrix are unknown.  One may compute some of the entries in the connection matrix from knowledge of the flow (such as the flow-defined entries).  Now one uses the constraints (upper-triangular, $Ker\Delta/Im\Delta = H_*(S)$, etc) to reason about the unknown entries.  This form of analysis can be seen, for instance, in~\cite{}.  Our point of view from the computational Conley theory is different.  The chain data is all provided.  From this one may compute a connection matrix (from a data analysis perspective this may be viewed as data reduction). 
\end{rem}


\subsection{Connection Matrix Redux}

J. Robbin and D. Salamon have a related development of the connection matrix~\cite{salamon}.   Instead of a chain complex braid, their idea is to assign a subcomplex to each lower set of the poset.  As the lower sets form a lattice, the assignment is required to be a lattice homomorphism.  A $P$-filtered chain complex is a chain complex $(C,\partial)$ with a collection of subcomplexes $\{C_\alpha\}_{\alpha\in O(P)}$ such that $$C_{\alpha\cap \beta} = C_\alpha\cap C_\beta, \quad C_{\alpha\cup \beta} = C_\alpha + C_\beta,\quad C_\emptyset = \{0\},\quad C_P = C$$ and that $$\partial(C_\alpha)\subset C_\alpha$$

Let $L$ be a lattice and $C$ be a chain complex.  It is straightforward that their definition is equivalent to taking a $J(L)$-filtered chain complex to be a lattice morphism $\rho: L\to S(C)$.

A mapping $\phi:A\to B$ of $P$-filtered chain complexes is said to {\em preserve the filtration} if $\phi(A_\alpha)\subset B_\alpha$.  A morphism of $P$-chain map $\phi:A\to B$ of $P$-filtered chain complexes is a chain map $A\to B$ which preserves the filtration.

For chain complexes $A,C$ a map $\phi\in Hom(A,C)$.  If $B\subset A$ is a subcomplex then it is straightforward $\phi(A)$ is a subcomplex of $C$. This implies $\phi$ induces a function (not necessarily a morphism) $\Phi:S(A)\to S(B)$.  Let $\rho:L\to S(A),\sigma:L\to S(B)$ be $J(L)$-filtered chain complexes. It is clear that a chain map $\phi:A\to B$ preserves the filtration if and only if $\Phi(\mu(q))\leq \nu(q)$.

It is implicit in~\cite{salamon} that the correct model for connection matrix theory is homotopy theory.    Two $P$-chain maps $\phi,\psi:A\to B$ are called $P$-chain homotopic if there is a map $\gamma:A\to B$ which preserves the filtration and satisfies $$\phi-\psi = \partial_B \circ \gamma + \gamma\circ \partial_A$$

Two $P$-filtered chain complexes $A$ and $B$ are called $P$-chain equivalent if there are morphisms $\phi:A\to B$ and $\psi:B\to A$ such that both $\phi\circ \psi:B\to A$ and $\psi\circ \phi:A\to B$ are $P$-chain homotopic to the identity.   A $P$-connection matrix is a $P$-filtered chain complex $(C,\Delta)$ with the property that $$\Delta(C_\beta)\subset C_{\beta \backslash p}$$ whenever $p$ is maximal in $\beta$.  

Although not carried out in~\cite{salamon}, using the idea of $P$-chain equivalence one can build a homotopy category as outlined in Section~\ref{sec:prelims:AT}.  This makes homology implicit, obviating the need to define the equivalent of a graded module braid.  





